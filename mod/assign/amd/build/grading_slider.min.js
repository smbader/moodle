define(["jquery","mod_assign/grading_events","mod_assign/grading_panel","mod_assign/grading_review_panel","mod_assign/grading_actions"],function(a,b,c,d,e){var f=function(b,c,d,e){this._dragbar=a(b),this._mainwindow=a(c),this._reviewpanel=a(d),this._gradepanel=a(e),this.registerEventListeners()};return f.prototype.registerEventListeners=function(){var c=a(document),d=a(this._dragbar),e=a(this._mainwindow),f=a(this._reviewpanel),g=a(this._gradepanel);d.on("mousedown",function(b){b.preventDefault();var d=a("<div>",{id:"ghostbar",css:{height:"calc(100% - 145px)",marginTop:"85px",cursor:"col-resize",top:e.offset().top,left:e.offset().left}}).appendTo("body");c.on("mousemove",function(a){d.css("left",a.pageX)})}),c.on("mouseup",function(b){if(a("#ghostbar").length){this.resetPanels();var d=b.pageX;b.pageX<850?(f.addClass("wrapToolbar"),b.pageX<550&&(d=550)):window.innerWidth-b.pageX<250?d=window.innerWidth-250:f.removeClass("wrapToolbar");var e=d/window.innerWidth*100,h=100-e;f.css("right",h+"%"),g.css("left",e+"%"),g.css("width",h+"%"),a("#ghostbar").remove(),c.unbind("mousemove")}}.bind(this)),c.on(b.COLLAPSE_GRADE_PANEL,function(){this.resetAdjustments()}.bind(this)),c.on(b.COLLAPSE_REVIEW_PANEL,function(){this.resetAdjustments()}.bind(this)),c.on(b.EXPAND_GRADE_PANEL,function(){this.resetAdjustments()}.bind(this))},f.prototype.resetPanels=function(){d.prototype.expandPanel(),c.prototype.expandPanel(),e.prototype.resetLayoutButtons(),e.prototype.getExpandAllPanelsButton().addClass("active")},f.prototype.resetAdjustments=function(){var b=a(this._reviewpanel),c=a(this._gradepanel);b.removeClass("wrapToolbar"),b.removeAttr("style"),c.removeAttr("style"),a("#ghostbar").remove()},f});