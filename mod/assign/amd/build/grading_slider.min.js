/**
 * Javascript controller for the "Grading" panel at the right of the page.
 *
 * @module     mod_assign/grading_slider
 * @class      GradingSlider
 * @copyright  2019 Steve Bader <smbader@ncsu.edu>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @since      3.6
 */
define("mod_assign/grading_slider",["jquery","mod_assign/grading_events","mod_assign/grading_panel","mod_assign/grading_review_panel","mod_assign/grading_actions"],(function($,GradingEvents,GradingPanel,GradingReviewPanel,GradingActions){var GradingSlider=function(selector_dragbar,selector_main,selector_reviewpanel,selector_gradepanel){this._dragbar=$(selector_dragbar),this._mainwindow=$(selector_main),this._reviewpanel=$(selector_reviewpanel),this._gradepanel=$(selector_gradepanel),this.registerEventListeners()};return GradingSlider.prototype.registerEventListeners=function(){var docElement=$(document),dragbar=$(this._dragbar),main=$(this._mainwindow),reviewpanel=$(this._reviewpanel),gradepanel=$(this._gradepanel);dragbar.on("mousedown",(function(e){e.preventDefault();var ghostbar=$("<div>",{id:"ghostbar",css:{height:"calc(100% - 145px)",marginTop:"85px",cursor:"col-resize",top:main.offset().top,left:main.offset().left}}).appendTo("body");docElement.on("mousemove",(function(e){ghostbar.css("left",e.pageX)}))})),docElement.on("mouseup",function(e){if($("#ghostbar").length){this.resetPanels();var mainWidth=e.pageX;e.pageX<850?(reviewpanel.addClass("wrapToolbar"),e.pageX<550&&(mainWidth=550)):window.innerWidth-e.pageX<250?mainWidth=window.innerWidth-250:reviewpanel.removeClass("wrapToolbar");var percentage=mainWidth/window.innerWidth*100,mainPercentage=100-percentage;reviewpanel.css("right",mainPercentage+"%"),gradepanel.css("left",percentage+"%"),gradepanel.css("width",mainPercentage+"%"),$("#ghostbar").remove(),docElement.unbind("mousemove")}}.bind(this)),docElement.on(GradingEvents.COLLAPSE_GRADE_PANEL,function(){this.resetAdjustments()}.bind(this)),docElement.on(GradingEvents.COLLAPSE_REVIEW_PANEL,function(){this.resetAdjustments()}.bind(this)),docElement.on(GradingEvents.EXPAND_GRADE_PANEL,function(){this.resetAdjustments()}.bind(this))},GradingSlider.prototype.resetPanels=function(){GradingReviewPanel.prototype.expandPanel(),GradingPanel.prototype.expandPanel(),GradingActions.prototype.resetLayoutButtons(),GradingActions.prototype.getExpandAllPanelsButton().addClass("active")},GradingSlider.prototype.resetAdjustments=function(){var reviewpanel=$(this._reviewpanel),gradepanel=$(this._gradepanel);reviewpanel.removeClass("wrapToolbar"),reviewpanel.removeAttr("style"),gradepanel.removeAttr("style"),$("#ghostbar").remove()},GradingSlider}));

//# sourceMappingURL=grading_slider.min.js.map